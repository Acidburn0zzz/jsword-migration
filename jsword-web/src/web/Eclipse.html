<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Setting Up Eclipse for JSword and BibleDesktop</title>
</head>
<body>
<h1>Setting Up Eclipse for JSword and BibleDesktop</h1>
<p>
  JSword and Bible Desktop are being actively developed in Eclipse.
  While this is not an endorsement of Eclipse, you will find project
  files for Eclipse that will speed your ability to develop JSword.
  You may use any other means of developing JSword, but we may not be
  able to provide guidance.
</p>
<p>
  This document should help you set up Eclipse so you can help develop
  JSword and BibleDesktop. If you find it incomplete, please let us know
  or once you have Eclipse set up, make the changes and send us a patch.
</p>

<h2>Obtain and install Sun's Java 1.4.2_x</h2>
<p>
  To develop JSword and BibleDesktop Java code with Eclipse, you will need to tell it to use
  Sun's Java 1.4.2. You will need to get the J2SE SDK.
  We recommend using the most recent point release
  which at the time of this writing was &quot;J2SE v1.4.2_15 SDK&quot;.
  You can get Sun's Java 1.4.2
  <a href="http://java.sun.com/j2se/1.4.2/download.html">here</a>.
  You can find instructions on installing Sun's Java for Linux under
  <a name="linuxjava" href="linuxjava.html">Installing Java for Linux</a>.
</p>
<p>
  If possible set an environment variable, <code>JAVA_HOME</code> to point to 
  the directory you just created. This might be something like <code>C:\Java\j2sdk1.4.2_15</code>.
</p>

<h2>Obtain and install Sun's Java 1.5 (aka Java 5)</h2>
<p>
  We develop under Java 1.4.2, but routinely test against Java 5. We will move to Java 5
  when it is well supported on all the platforms to which we deploy. Currently
  these are Windows, Mac and Linux. At this time MacOS 10.3 does not support Java 5
  and probably will not. (Soon enough we will start testing with Java 6)
</p>
<p>
  <strong>NOTE:</strong>BibleDesktop looks best in Java 5 or later and for
  <em>right-to-left</em> languages it is a necessity. For this reason,
  it is strongly recommended that the builds are done with Java 1.4.2,
  but that running is done with Java 1.5 or better. If you are not changing
  java code, but only working on translations, you only need to install Java 1.5.0 SDK.
</p>
<p>
  We recommend using the most recent point release
  which at the time of this writing was &quot;JDK 5.0 Update 12&quot;.
  You can get Sun's Java 5
  <a href="http://java.sun.com/javase/downloads/index_jdk5.jsp">here</a>.
  You can find instructions on installing Sun's Java for Linux under
  <a name="linuxjava" href="linuxjava.html">Installing Java for Linux</a>.
</p>

<h2>Obtain and install Eclipse 3.3</h2>
<p>
  Any version of Eclipse 3.3 or higher will work well. The screenshots that
  are provided are from 3.3, Linux, GTK version, running under
  the Gnome desktop.
</p>
<p>
  You can get Eclipse for Windows, Linux and Mac from here:
  <a href="http://www.eclipse.org/downloads">http://www.eclipse.org/downloads</a>.
  Some Linux distributions provide Eclipse, but they are generally a release or two behind
  and often lack some functionality. For this reason only, they are not recommended.
  The download will be about 80-140M, so it is best to have a broadband connection.
  The page will provide you with several choices, but the
  &quot;Eclipse IDE for Java Developers&quot; is sufficient.
  The screenshots below are from the Linux GTK version.
</p>

<h2>Installing Eclipse</h2>
<p>
  If you are installing Eclipse for your own use, you can install it to any directory
  for which you have permissions. Otherwise you will need Linux root or
  Windows' administrator permissions.
  Do not install it to a directory containing an existing <q>eclipse</q> directory.
  It will create the Eclipse installation in that directory. For Windows, just unzip
  it to the c:\java directory. For Linux, in the directory of your choosing,
  run <code>gtar zxvf eclipse-java-europa-linux-gtk.tar.gz</code>.
</p>
<p>
  On Windows, you will probably will want to create a shortcut for Eclipse.
  Assuming that you have installed Eclipse at c:\Eclipse, use the following as the target:<br/>
  <code>c:\eclipse\eclipse.exe -vm %JAVA_HOME%\bin\javaw -vmargs -Xmx1024M</code><br/>
</p>  

<h2>Install Subclipse, a Subversion client</h2>
<p>
  Follow the instructions on the <a href="http://subclipse.tigris.org/install.html" target="subclipse">Subclipse website</a>.
</p>

<h2>Setting up the JSword projects in Eclipse</h2>

<h3>Setup an Eclipse Workspace</h3>
<p>
  When you start up Eclipse, you can choose which workspace to work
  in or you can create a new one. Eclipse will provide a default workspace
  in your home directory of <q>workspace</q>.
  <a href="images/eclipse/startup.png">[Image]</a>
  Since I develop more than one project, I want to keep each in different workspaces.
  For JSword, I use ~/eclipse/jsword.
  <a href="images/eclipse/changeworkspace.png">[Image]</a>
  Another project would be ~/eclipse/flashcards.
</p>

<h3>Welcome to Eclipse</h3>
<p>
  When you first enter Eclipse you will be presented with an opportunity
  to learn about Eclipse. You can get back to this view at anytime by choosing
  Welcome from the Help menu.
</p>
<p>
  Click on the <q>Workbench</q> button to use Eclipse.
  <a href="images/eclipse/firstrun.png">[Image]</a>
</p>

<h3>Connect to JSword's SVN repository</h3>
<p>
  Click on the <q>Open Perspective button.</q> <a href="images/eclipse/openperspective.png">[Image]</a>
  And then pick the <q>Other</q> menu choice. <a href="images/eclipse/otherperspective.png">[Image]</a>
  This will provide you with a dialog box of various perspectives. Choose the
  <q>SVN Repository Exploring</q> perspective. <a href="images/eclipse/svnperspective.png">[Image]</a>
</p>
<ul>
  <li>This will automatically open the SVN Repository Exploring perspective.</li>
  <li>Click on the <q>Add SVN Repository</q> button. <a href="images/eclipse/svnaddrepository.png">[Image]</a></li>
  <li>For the URL use the value: http://www.crosswire.org/svn/jsword/trunk.
      <a href="images/eclipse/svnjswordurl.png">[Image]</a>
  </li>
  <li>Open the repository, expanding https://www.crosswire.org/svn/jsword/trunk.</li>
  <li>Select at a minimum the following:
      <ul>
        <li>bibledesktop</li>
        <li>common</li>
        <li>common-swing</li>
        <li>jsword</li>
      </ul>
  </li>
  <li>Right click on one of the selection and choose <q>Checkout...</q> <a href="images/eclipse/svncheckout.png">[Image]</a></li>
      and then click <q>Finish</q>. <a href="images/eclipse/checkoutasprojects.png">[Image]</a></li>
  <li>Later you may wish to do help maintain the website and then you will
      want bibledesktop-web and jsword-web.</li>
  <li>You don't need this perspective for day to day development,
      so you can remove it.</li>
</ul>

<h3>Setting up preferences in Eclipse</h3>
<p>
  In order to speed development we request that you conform to the style of
  coding that is currently used. Everyone has their own favorite way of doing
  things, so we had to establish one style standard. And we try to maintain these.
  You can read more about these standards <a href="writingcode.html">here</a>.
  These are loaded with each project.
</p>

<h3>Letting Eclipse Know Where Java is Installed</h3>
<p>
  Under Windows -> Preferences (on the Mac it is Eclipse -> Preferences), 
  expand <q>Java</q> and then select <q>Installed JRE</q>. <a href="images/eclipse/javasetup.png">[Image]</a>
  Here click on the <q>Add</q> button and add entries labelled,
  jdk-1.4.2 <a href="images/eclipse/jdk142setup.png">[Image]</a> and jdk-1.5.0 <a href="images/eclipse/jdk150setup.png">[Image]</a>. Under Linux, installed according to the instructions above,
  Java 1.4.2 would have a path something like <code>/usr/lib/jvm/java-1.4.2-sun-1.4.2.12</code>.
  You can use the search button to find them and re-label them afterwards.
  Make sure that you have <q>assertions</q> turned on for development by adding <q>-ea</q> for the <q>Default VM Args</q>.
  When you are all done it should look like this. <a href="images/eclipse/javafinalsetup.png">[Image]</a>
</p>

<h3>Working under the Java Perspective</h3>
<p>
  Eclipse provides several perspectives under which you can develop code.
  My personal rut is the Java Perspective. This can be added in the same manner
  that the SVN Repository Exploring Perspective was added.
</p>
<p>
  Finding code is relatively easy. All source is under <q>src</q>. Under there you will find
  <q>main</q>, with all of the main code and <q>test</q> with all of the test code. Under
  <q>main</q> we currently only have java code, but we have structured this to allow for other
  kind of code. <a href="images/eclipse/findingcode.png">[Image]</a>
</q>

<h3>Initial testing</h3>
<p>
  Initial testing is nothing more than running the application and seeing it work as expected.
  This has been made easy, <i>if</i> you have named the <q>Installed JREs</q> as instructed above.
  In the <q>Java Perspective</q>, click on the triangle on the right of the <q>Run</q> button.
  The first time you do this, it will not be a very useful list. From that list, pick <q>Open Run Dialog</q>
  <a href="images/eclipse/pickrundialog.png">[Image]</a>. In the Run dialog, expand <q>Java Applications</q>
  and then click on <q>Run</q> <a href="images/eclipse/rundialog.png">[Image]</a>. You can add other
  launchers in a similar fashion.
</p>
<p>
  Once you have added run BibleDesktop in this fashion it is added to the list.
  <a href="images/eclipse/runBD.png">[Image]</a>
  During the run, output will go to the <q>Console</q>, and from there you can terminate the
  application if it becomes unresponsive.
</p>

<h3>Working under the Team Synchronization Perspective</h3>
<p>
  This can be added in the same manner that the
  <q>SVN Repository Exploring Perspective</q> was added.
  To initially connect this perspective to the SVN Repository, click on the
  <q>Synchronize...</q> button <a href="images/eclipse/svnpicksynchro.png">[Image]</a> and select <q>SVN</q> <a href="images/eclipse/svnsynchro.png">[Image]</a> if it is not highlighted.
  Click on the <q>Next</q> button and then click <q>Select All</q> followed by
  the <q>Finish</q> button. <a href="images/eclipse/svnsynchrosetup.png">[Image]</a> 
</p>
<p>
  When you make changes to any of the projects, this perspective will track the changes.
  Also, you can click the same button, now labelled <q>Sychronize SVN (Workspace)</q>
  to get the latest changes from the repository.
</p>

<h3>Checking for Updates</h3>
<p>
  In the <q>Team Synchronization Perspective</q> click on the <q>Synchronize SVN (Workspace)</q>
  button. Click the <q>Incoming</q> button and then select everything that is shown.
  Right clicking will give you all the options that are available to you. Choose <q>Update</q>.
  <a href="images/eclipse/svnupdate.png">[Image]</a>
  If you see <q>Override and Update</q> <a href="images/eclipse/svnoverride.png">[Image]</a>, stay away from it. It means that one or more of the files
  being updated have been changed by you and choosing it will throw away your work. Probably
  not what you want.
</p>

<h3>Submitting Patches</h3>
<p>
  To submit changes you will create a patch file, one for each project.
  Zip them all up and email it to
  <a href="mailto:jsword-devel@crosswire.org">jsword-devel@crosswire.org</a>.
  Make sure you explain in detail what you have done and how you have tested it.
</p>
<p>
  Generally, we will review the patch and apply it locally. Then we will make
  changes to make it conform to the coding standards, test it and then check it in.
  If we are in the middle of a big change that we cannot check in at the moment,
  your change may have to wait until we can commit our changes. Typically, turn
  around is a week or less.
</p>

<h3>Checking in Changes</h3>
<p>
  Everyone has permission to check in for the <q>incubator</q> project. A select
  few people have permissions elsewhere. To check in, go to the <q>Team Synchronization Perspective</q>
  and click on the <q>Outgoing</q> button. Select what you want to check in. Right clicking
  on something selected will provide you with the opportunity
  to choose <q>Commit</q> <a href="images/eclipse/svnpickcommit.png">[Image]</a>, which will bring up a dialog box. In that dialog box, type a short
  explanation describing the change. Below this is a list of everything that has changed and
  a terse label for the change. Review the items in the list and check or uncheck them depending
  on whether the changes should be checked in. Finally, click on <q>OK</q>. <a href="images/eclipse/svncommitdialog.png">[Image]</a>
  If the repository is password protected, you will need to supply your password. Saving your password is a good idea,
  if your machine is secure. <a href="images/eclipse/svnpassword.png">[Image]</a>
</p>
</body>
</html>
